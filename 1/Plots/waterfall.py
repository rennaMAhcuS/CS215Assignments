import matplotlib.pyplot as plt
import numpy as np
from mypy.expandtype import has_generic_callable

# Set font to Cambria
plt.rcParams['font.family'] = 'Cambria'

# Data
ages = [4, 9, 14, 19, 24, 29, 34, 39, 44, 49, 54, 59, 64, 69, 74, 79, 84, 100]
years = np.array([2006, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016])
rates = np.array([
    [17.0, 1.4, 1.0, 1.6, 2.0, 2.3, 2.7, 3.4, 4.2, 6.0, 7.7, 13.0, 21.2, 33.7, 52.1, 75.5, 107.8, 189.6],
    [16.0, 1.3, 1.0, 1.4, 2.0, 2.1, 2.6, 3.3, 4.4, 6.1, 8.6, 13.1, 22.6, 32.7, 56.6, 74.6, 113.6, 195.5],
    [15.2, 1.2, 0.9, 1.4, 2.0, 2.1, 2.7, 3.5, 4.5, 6.1, 8.6, 12.6, 22.5, 33.5, 54.3, 79.4, 116.9, 197.4],
    [15.7, 1.4, 1.0, 1.5, 2.1, 2.2, 2.8, 3.6, 4.6, 6.2, 8.7, 13.0, 22.9, 33.0, 54.2, 77.4, 114.1, 198.1],
    [16.2, 1.5, 1.0, 1.6, 2.2, 2.3, 2.9, 3.7, 4.7, 6.3, 8.8, 13.3, 23.3, 33.6, 54.8, 79.4, 114.6, 199.3],
    [16.7, 1.5, 1.1, 1.7, 2.2, 2.4, 3.0, 3.8, 4.8, 6.4, 8.9, 13.5, 23.6, 34.1, 55.4, 81.4, 115.2, 200.6],
    [17.2, 1.6, 1.1, 1.8, 2.3, 2.5, 3.1, 3.9, 4.9, 6.5, 9.0, 13.7, 24.0, 34.7, 56.0, 83.4, 115.8, 201.8],
    [17.7, 1.7, 1.2, 1.9, 2.4, 2.6, 3.2, 4.0, 5.0, 6.6, 9.1, 13.9, 24.4, 35.3, 56.6, 85.4, 116.4, 203.0],
    [18.2, 1.7, 1.2, 2.0, 2.5, 2.7, 3.3, 4.1, 5.1, 6.7, 9.2, 14.1, 24.7, 35.9, 57.1, 87.3, 117.0, 204.2],
    [10.2, 0.7, 0.7, 0.9, 1.2, 1.4, 1.8, 2.6, 3.2, 5.0, 9.4, 13.6, 20.3, 28.6, 41.1, 65.2, 116.2, 209.5],
    [9.4, 0.7, 0.5, 0.8, 1.2, 1.3, 1.9, 2.5, 3.7, 5.2, 8.6, 13.3, 18.8, 28.2, 45.4, 64.7, 115.3, 197.8]
])

# Create 3D plot with higher resolution
fig = plt.figure(figsize=(12, 8), dpi=300)
ax = fig.add_subplot(111, projection='3d')

# Plotting each year's data
for i, year in enumerate(years):
    ax.plot(ages, [year] * len(ages), rates[i], label=str(year))

# Adding labels and title
ax.set_xlabel('Ages')
ax.set_ylabel('Year')
ax.set_zlabel('Rates')
ax.set_title('Rates by Age for Different Years')
ax.legend()

# plt.show()

plt.savefig("plots/waterfall_plot.png")